export class FarandulaMusicCollection{constructor(){this.dictionary={}}addSong(t,i,o,e){this.dictionary[t]={audioUrl:i,loopStartTime:o,loopEndTime:e}}getSong(t){return this.dictionary[t]}removeSong(t){delete this.dictionary[t]}getAllSongs(){return Object.values(this.dictionary)}getKeys(){return Object.keys(this.dictionary)}hasSong(t){return t in this.dictionary}}export const musicPlayer={audio:new Audio,currentSong:null,isPlaying:!1,loopStart:0,loopEnd:1/0,play(t,i=0,o=1/0){this.loopStart=i,this.loopEnd=o,this.audio.src=t,this.audio.play(),this.isPlaying=!0,this.audio.addEventListener("timeupdate",(()=>{this.audio.currentTime>=this.loopEnd&&(this.audio.currentTime=this.loopStart)}))},stop(){this.audio.pause(),this.audio.currentTime=0,this.isPlaying=!1,this.audio.removeEventListener("timeupdate",(()=>{}))},swapSong(t,i=0,o=1/0){if(this.loopStart=i,this.loopEnd=o,this.isPlaying){const i=setInterval((()=>{this.audio.volume>.1?this.audio.volume-=.1:(clearInterval(i),this.stop(),this.playWithFadeIn(t))}),100)}else this.playWithFadeIn(t)},playWithFadeIn(t,i=0,o=1/0){this.loopStart=i,this.loopEnd=o,this.audio.volume=0,this.play(t);const e=setInterval((()=>{this.audio.volume<1?this.audio.volume=Math.min(1,this.audio.volume+.1):clearInterval(e)}),100)}};